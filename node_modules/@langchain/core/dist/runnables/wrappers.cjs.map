{"version":3,"file":"wrappers.cjs","names":["stream: AsyncGenerator","IterableReadableStream"],"sources":["../../src/runnables/wrappers.ts"],"sourcesContent":["import { IterableReadableStream } from \"../utils/stream.js\";\n\nexport function convertToHttpEventStream(stream: AsyncGenerator) {\n  const encoder = new TextEncoder();\n  const finalStream = new ReadableStream<Uint8Array>({\n    async start(controller) {\n      for await (const chunk of stream) {\n        controller.enqueue(\n          encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`)\n        );\n      }\n      controller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n      controller.close();\n    },\n  });\n  return IterableReadableStream.fromReadableStream(finalStream);\n}\n"],"mappings":";;;AAEA,SAAgB,yBAAyBA,QAAwB;CAC/D,MAAM,UAAU,IAAI;CACpB,MAAM,cAAc,IAAI,eAA2B,EACjD,MAAM,MAAM,YAAY;AACtB,aAAW,MAAM,SAAS,QACxB,WAAW,QACT,QAAQ,OAAO,CAAC,mBAAmB,EAAE,KAAK,UAAU,MAAM,CAAC,IAAI,CAAC,CAAC,CAClE;EAEH,WAAW,QAAQ,QAAQ,OAAO,iBAAiB,CAAC;EACpD,WAAW,OAAO;CACnB,EACF;AACD,QAAOC,4CAAuB,mBAAmB,YAAY;AAC9D"}